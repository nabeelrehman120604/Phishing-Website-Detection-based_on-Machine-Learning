<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Phishing Website Detector</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üîç</text></svg>">


    <script>
        // üßπ Clear input on reload
        window.onload = function() {
            const urlField = document.getElementById('url');
            if (urlField) urlField.value = '';
        };

        // üõ°Ô∏è Simple client-side validation (allow any URL string)
        function validateForm() {
            const urlField = document.getElementById('url');
            const urlValue = urlField.value.trim();

            if (!urlValue) {
                alert("Please enter a URL.");
                return false;
            }

            if (urlValue.split(/\s+/).length > 1) {
                alert("Please enter only one URL at a time.");
                return false;
            }

            return true; // ‚úÖ allow any string input
        }

        // üîÅ Reset the form and hide results instantly
        function resetForm() {
            document.getElementById('url').value = '';  // clear input
            const resultBox = document.querySelector('.result');
            if (resultBox) resultBox.style.display = 'none'; // hide result section
            const urlBox = document.querySelector('.url-display');
            if (urlBox) urlBox.style.display = 'none'; // hide URL section too
        }
    </script>
</head>

<body>
    <div class="page-wrap">
        <div class="container">
            <h1>üîç Phishing Website Detection</h1>

            <form action="/predict" method="post" onsubmit="return validateForm();">
                <input type="text" id="url" name="url"
                       placeholder="Enter any website URL here"
                       required>
                <button type="submit">Check</button>
            </form>

            {% if url %}
                <p class="url-display" style="margin-top: 20px; text-align:center; display:inline-block;">
                    <strong>URL:</strong> {{ url }}
                </p>
            {% endif %}

            {% if prediction_text %}
<div class="result">
    <h2>{{ prediction_text }}</h2>

    {% if prediction_text == "Phishing Website Detected ‚ö†Ô∏è" and extra_reasons %}
        <p style="text-align:center; font-weight:500; color:#374151; margin:10px 0 14px 0;">
            Want to know why this website seems suspicious? üëá Click below for details.
        </p>

        <div style="text-align:center;">
            <button type="button" id="toggleDetails"
                    style="background-color:#2563eb; color:white; border:none; padding:10px 18px;
                           border-radius:6px; font-weight:600; cursor:pointer;">
                ‚ñº Show More Details
            </button>
        </div>

        <div id="detailsBox" style="display:none; margin-top:16px; text-align:left;">
            <ul style="list-style:none; padding:0; color:#555; max-width:700px; margin:0 auto;">
                {% for extra in extra_reasons %}
                    <li style="margin-bottom:6px;">‚Ä¢ {{ extra }}</li>
                {% endfor %}
            </ul>
        </div>

        <script>
            const toggleBtn = document.getElementById('toggleDetails');
            const detailsBox = document.getElementById('detailsBox');
            toggleBtn.onclick = function() {
                if (detailsBox.style.display === 'none') {
                    detailsBox.style.display = 'block';
                    toggleBtn.textContent = '‚ñ≤ Hide Details';
                } else {
                    detailsBox.style.display = 'none';
                    toggleBtn.textContent = '‚ñº Show More Details';
                }
            };
        </script>
    {% endif %}

    <button type="button" class="reset-btn" onclick="resetForm()">üîÑ Reset</button>
</div>
{% endif %}


        </div>
    </div>
</body>
</html>
