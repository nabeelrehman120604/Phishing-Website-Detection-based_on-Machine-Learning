<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Phishing Website Detector</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üõ°Ô∏è</text></svg>">
</head>
<body>

<div class="page-wrap">
    <div class="container">
        <h1 class="cyber-title">üõ°Ô∏è Phishing Website Detection</h1>

        <form action="/predict" method="post" onsubmit="return validateForm();">
            <input type="text" id="url" name="url" placeholder="Enter any website URL here" required>
            <button type="submit">Scan</button>
        </form>

        {% if url %}
        <p class="url-display"><strong>URL:</strong> {{ url }}</p>
        {% endif %}

        {% if prediction_text %}
        <div class="result {% if 'Phishing' in prediction_text %}danger{% else %}success{% endif %}">
            <h2>{{ prediction_text }}</h2>

            {% if prediction_text == "Phishing Website Detected ‚ö†Ô∏è" and extra_reasons %}
            <p class="reason-note">This site shows suspicious indicators. Click to view details.</p>

            <div class="details-btn-wrap">
                <button type="button" id="toggleDetails" class="details-btn">‚ñº Show More Details</button>
            </div>

            <div id="detailsBox" class="details-box">
                <ul>
                    {% for extra in extra_reasons %}
                    <li>‚Ä¢ {{ extra }}</li>
                    {% endfor %}
                </ul>
            </div>

            <script>
                const toggleBtn = document.getElementById('toggleDetails');
                const detailsBox = document.getElementById('detailsBox');
                toggleBtn.onclick = function() {
                    if (detailsBox.style.display === 'none') {
                        detailsBox.style.display = 'block';
                        toggleBtn.textContent = '‚ñ≤ Hide Details';
                    } else {
                        detailsBox.style.display = 'none';
                        toggleBtn.textContent = '‚ñº Show More Details';
                    }
                };
            </script>
            {% endif %}

            <button type="button" class="reset-btn" onclick="resetForm()">üîÑ Reset</button>
        </div>
        {% endif %}

    </div>
</div>

<footer class="maintenance-banner">
    <span class="maintenance-text">‚ö†Ô∏è This website is under active improvement. Some features may not work currently and will be online soon.</span>
</footer>

<script>
window.onload = function() {
    const urlField = document.getElementById('url');
    if (urlField) urlField.value = '';
};

function validateForm() {
    const urlField = document.getElementById('url');
    const urlValue = urlField.value.trim();
    if (!urlValue) { alert("Please enter a URL."); return false; }
    if (urlValue.split(/\s+/).length > 1) { alert("Please enter only one URL."); return false; }
    return true;
}

function resetForm() {
    document.getElementById('url').value = '';
    const resultBox = document.querySelector('.result');
    if (resultBox) resultBox.style.display = 'none';
    const urlBox = document.querySelector('.url-display');
    if (urlBox) urlBox.style.display = 'none';
}
</script>

</body>
</html>
